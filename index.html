<!Doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="/_sdk/element_sdk.js"></script>
  <title>Switzerland Photo Gallery</title>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100%;
    }

    * {
      box-sizing: border-box;
    }

    .navbar {
      background: rgba(255, 255, 255, 0.95) !important;
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 12px 0;
    }

    .navbar-brand {
      font-weight: 700;
      font-size: 22px;
      color: #104765 !important;
    }

    .navbar-brand i {
      color: #4caf50;
    }

    .gallery-wrapper {
      width: 100%;
      min-height: 100%;
      padding: 120px 32px 48px 32px;
      background: linear-gradient(135deg, rgba(34, 139, 34, 0.95) 0%, rgba(16, 71, 101, 0.92) 50%, rgba(76, 175, 80, 0.9) 100%),
                  url('data:image/svg+xml,<svg viewBox="0 0 1200 800"><rect fill="%23228b22" width="1200" height="800"/><polygon points="0,500 300,300 600,400 900,250 1200,350 1200,800 0,800" fill="%23104765" opacity="0.4"/><polygon points="200,600 500,450 800,520 1200,420 1200,800 0,800" fill="%234caf50" opacity="0.3"/><circle cx="200" cy="150" r="80" fill="%23fff9c4" opacity="0.6"/></svg>') center/cover no-repeat;
      background-attachment: fixed;
    }

    .gallery-header {
      text-align: center;
      margin-bottom: 48px;
    }

    .gallery-title {
      font-size: 48px;
      font-weight: 700;
      margin: 0 0 12px 0;
      letter-spacing: -1px;
      background: linear-gradient(135deg, #000000 0%, #1e3a8a 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-family: 'Georgia', 'Garamond', serif;
    }

    .gallery-subtitle {
      font-size: 20px;
      margin: 0;
      opacity: 0.9;
      background: linear-gradient(135deg, #000000 0%, #2563eb 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-family: 'Georgia', 'Garamond', serif;
    }

    .card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      height: 100%;
      border: none;
      border-radius: 12px;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 36px rgba(76, 175, 80, 0.4) !important;
    }

    .card-img-top {
      height: 250px;
      cursor: pointer;
      padding: 0;
      object-fit: cover;
    }

    .card-body {
      padding: 20px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 8px 0;
    }

    .card-text {
      margin: 0;
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.75;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1050;
      padding: 24px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .overlay.active {
      display: flex;
      opacity: 1;
    }

    .overlay-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
      border-radius: 8px;
      overflow: hidden;
    }

    .overlay-content img {
      width: auto;
      height: auto;
      max-width: 80vw;
      max-height: 80vh;
      display: block;
      border-radius: 8px;
    }

    .close-button {
      position: absolute;
      top: 24px;
      right: 24px;
      background: rgba(76, 175, 80, 0.3);
      border: 2px solid #4caf50;
      color: #4caf50;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      font-size: 24px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
    }

    .close-button:hover {
      background: rgba(76, 175, 80, 0.5);
      box-shadow: 0 0 20px rgba(76, 175, 80, 0.6);
    }

    .download-button {
      position: absolute;
      bottom: 24px;
      right: 24px;
      background: rgba(76, 175, 80, 0.3);
      border: 2px solid #4caf50;
      color: #4caf50;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
      font-weight: 600;
    }

    .download-button:hover {
      background: rgba(76, 175, 80, 0.5);
      box-shadow: 0 0 20px rgba(76, 175, 80, 0.6);
    }

    @media (max-width: 768px) {
      .gallery-wrapper {
        padding: 32px 16px;
      }

      .gallery-title {
        font-size: 36px;
      }

      .gallery-subtitle {
        font-size: 16px;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <nav class="navbar navbar-expand-lg navbar-light fixed-top">
   <div class="container"><a class="navbar-brand" href="#"><i class="fas fa-mountain"></i> Switzerland</a> <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"> <span class="navbar-toggler-icon"></span> </button>
   </div>
  </nav>
  <div class="gallery-wrapper">
   <header class="gallery-header">
    <h1 class="gallery-title" id="gallery-title"> Switzerland</h1>
    <p class="gallery-subtitle" id="gallery-subtitle">Discover the beauty of the Swiss Alps</p>
    <div style="max-width: 500px; margin: 32px auto 0; position: relative; display: flex; align-items: center; gap: 12px;"><button id="back-btn" style="display: none; background: rgba(76, 175, 80, 0.3); border: 2px solid #4caf50; color: #4caf50; width: 48px; height: 48px; border-radius: 50%; font-size: 24px; cursor: pointer; backdrop-filter: blur(10px); transition: all 0.2s; flex-shrink: 0;" aria-label="Back to all locations">‚Üê</button> <input type="text" id="search-input" placeholder="Search locations..." style="flex: 1; padding: 14px 20px; border-radius: 50px; border: 2px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.15); color: white; font-size: 16px; outline: none; backdrop-filter: blur(10px);">
    </div>
   </header>
   <div class="container">
    <div class="row" id="gallery-grid"></div>
   </div>
  </div>
  <div class="overlay" id="overlay"><button class="close-button" id="close-button" aria-label="Close gallery">‚úï</button> <button class="download-button" id="download-button" aria-label="Download image"> <i class="fas fa-download"></i> Download </button>
   <div class="overlay-content" id="overlay-content"></div>
  </div>
  <footer style="background: rgba(16, 71, 101, 0.95); backdrop-filter: blur(10px); padding: 40px 0 20px 0; margin-top: 60px; border-top: 2px solid rgba(76, 175, 80, 0.3);">
   <div class="container">
    <div class="row">
     <div class="col-md-4 mb-4">
      <h5 style="color: #4caf50; font-weight: 600; margin-bottom: 20px;"><i class="fas fa-mountain"></i> Switzerland</h5>
      <p style="color: #e8f5e9; opacity: 0.8; line-height: 1.6;">Discover the breathtaking beauty of the Swiss Alps, crystal-clear lakes, and charming villages.</p>
</div>
   </div>
  </footer>
  <script async src="https://cdn.jsdelivr.net/npm/es-module-shims@1/dist/es-module-shims.min.js" crossorigin="anonymous"></script>
  <script type="importmap">
  {
    "imports": {
      "@popperjs/core": "https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/esm/popper.min.js",
      "bootstrap": "https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.esm.min.js"
    }
  }
  </script>  
  <script type="module">
    import * as bootstrap from 'bootstrap'

    const defaultConfig = {
      background_color: '#104765',
      surface_color: '#1a5f4a',
      text_color: '#e8f5e9',
      primary_color: '#4caf50',
      gallery_title: 'üá®üá≠ Switzerland',
      gallery_subtitle: 'Discover the beauty of the Swiss Alps',
      font_family: 'system-ui',
      font_size: 16
    };

    const galleryImages = [
      {
        id: 1,
        title: "Matterhorn Peak",
        location: "Zermatt",
        description: "The iconic pyramidal peak of the Matterhorn standing majestically at 4,478 meters.",
        filename: "images/matterhornpeak.jpg"
      },
      {
        id: 2,
        title: "Lake Geneva",
        location: "Montreux",
        description: "Crystal clear waters reflecting the surrounding Alps and charming lakeside towns.",
        filename: "images/lakegeneva.jpeg"
      },
      {
        id: 3,
        title: "Jungfraujoch",
        location: "Bernese Alps",
        description: "The 'Top of Europe' at 3,454 meters offering breathtaking panoramic views.",
        filename: "images/jungfraujoch.jpg"
      },
      {
        id: 4,
        title: "Lucerne Old Town",
        location: "Lucerne",
        description: "Medieval architecture and the famous Chapel Bridge over the Reuss River.",
        filename: "images/lucerneoldtown.jpg"
      },
      {
        id: 5,
        title: "Interlaken Valley",
        location: "Interlaken",
        description: "Nestled between Lake Thun and Lake Brienz with stunning mountain backdrop.",
        filename: "images/interlakenvalley.jpg"
      },
      {
        id: 6,
        title: "Rhine Falls",
        location: "Schaffhausen",
        description: "Europe's largest waterfall with 150 meters wide cascading waters.",
        filename: "images/rhinefalls.jpg"
      },
      {
        id: 7,
        title: "Grindelwald",
        location: "Bernese Oberland",
        description: "Charming alpine village surrounded by the Eiger North Face.",
        filename: "images/grindelwald.jpg"
      },
      {
        id: 8,
        title: "Z√ºrich Cityscape",
        location: "Z√ºrich",
        description: "Modern metropolis on the shores of Lake Z√ºrich with historic old town.",
        filename: "images/zurichcityscape.jpg"
      },
      {
        id: 9,
        title: "Lauterbrunnen Valley",
        location: "Lauterbrunnen",
        description: "Spectacular U-shaped valley with 72 thundering waterfalls.",
        filename: "images/lauterbrunnenvalley.jpg"
      },
      {
        id: 10,
        title: "St. Moritz",
        location: "Engadin Valley",
        description: "Glamorous alpine resort town known for winter sports and luxury.",
        filename: "images/stmoritz.jpg"
      },
      {
        id: 11,
        title: "Aletsch Glacier",
        location: "Valais Alps",
        description: "The largest glacier in the Alps, a UNESCO World Heritage site.",
        filename: "images/aletschglacier.jpg"
      },
      {
        id: 12,
        title: "Bern Old Town",
        location: "Bern",
        description: "UNESCO World Heritage medieval city center with the famous Zytglogge clock tower.",
        filename: "images/bernoldtown.jpg"
      },
      {
        id: 13,
        title: "Titlis Peak",
        location: "Engelberg",
        description: "Stunning glacier paradise accessible by the world's first rotating cable car.",
        filename: "images/titlispeak.jpg"
      },
      {
        id: 14,
        title: "Ch√¢teau de Chillon",
        location: "Montreux",
        description: "Medieval castle on the shores of Lake Geneva, inspiring poets and artists.",
        filename: "images/chateaudechillon.jpg"
      },
      {
        id: 15,
        title: "Appenzell Village",
        location: "Appenzell",
        description: "Picturesque village with colorful traditional houses and rich folklore.",
        filename: "images/appenzellvillage.jpg"
      }
    ];

    function renderGallery(searchTerm = '') {
      const grid = document.getElementById('gallery-grid');
      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      
      const filteredImages = galleryImages.filter(image => {
        if (!searchTerm) return true;
        const term = searchTerm.toLowerCase();
        return image.title.toLowerCase().includes(term) ||
               image.location.toLowerCase().includes(term) ||
               image.description.toLowerCase().includes(term);
      });

      if (filteredImages.length === 0) {
        grid.innerHTML = `
          <div class="col-12 text-center" style="padding: 60px 20px;">
            <p style="color: ${config.text_color || defaultConfig.text_color}; font-size: 20px; opacity: 0.7;">
              No locations found matching "${searchTerm}"
            </p>
          </div>
        `;
        return;
      }

      let output = "";

      for (let i = 0; i < galleryImages.length; i++) {
        const image = galleryImages[i];
        const isVisible = filteredImages.includes(image);
        
        if (isVisible) {
          output += `
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
              <div class="card shadow-sm h-100" style="background: ${config.surface_color || defaultConfig.surface_color}; border: none; border-radius: 12px; overflow: hidden;">
                <img src="${image.filename}" class="card-img-top" style="height: 250px; object-fit: cover; cursor: pointer;" onclick="openOverlay(${i})" onerror="this.src=''; this.alt='Image failed to load'; this.style.display='none';" alt="${image.title}">
                <div class="card-body" style="padding: 20px;">
                  <h3 class="card-title" style="color: ${config.text_color || defaultConfig.text_color}; font-size: 18px; font-weight: 600; margin: 0 0 8px 0;">
                    ${image.title}
                  </h3>
                  <p class="card-text" style="color: ${config.text_color || defaultConfig.text_color}; margin: 0 0 8px 0; font-size: 13px; opacity: 0.6; font-weight: 500;">
                    üìç ${image.location}
                  </p>
                  <p class="card-text" style="color: ${config.text_color || defaultConfig.text_color}; margin: 0 0 12px 0; font-size: 14px; line-height: 1.6; opacity: 0.75;">
                    ${image.description}
                  </p>
                </div>
              </div>
            </div>
          `;
        }
      }

      grid.innerHTML = output;
    }

    let currentImageIndex = 0;

    function openOverlay(imageIndex) {
      const overlay = document.getElementById('overlay');
      const content = document.getElementById('overlay-content');
      const image = galleryImages[imageIndex];
      currentImageIndex = imageIndex;
      content.innerHTML = `<img src="${image.filename}" style="max-width: 100%; max-height: 100%; display: block; margin: auto;" alt="${image.title}" onerror="this.src=''; this.alt='Image failed to load'; this.style.display='none';">`;
      overlay.classList.add('active');
    }
    
    window.openOverlay = openOverlay;

    function closeOverlay() {
      const overlay = document.getElementById('overlay');
      overlay.classList.remove('active');
    }

    function downloadImage() {
      const image = galleryImages[currentImageIndex];
      const link = document.createElement('a');
      link.href = image.filename;
      link.download = `${image.title.replace(/\s+/g, '_')}.jpg`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    document.getElementById('close-button').onclick = closeOverlay;
    document.getElementById('download-button').onclick = downloadImage;
    document.getElementById('overlay').onclick = (e) => {
      if (e.target.id === 'overlay') {
        closeOverlay();
      }
    };

    async function onConfigChange(config) {
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';
      const baseSize = config.font_size || defaultConfig.font_size;

      const bgColor = config.background_color || defaultConfig.background_color;
      document.querySelector('.gallery-wrapper').style.background = `linear-gradient(135deg, rgba(34, 139, 34, 0.95) 0%, rgba(16, 71, 101, 0.92) 50%, rgba(76, 175, 80, 0.9) 100%), url('data:image/svg+xml,<svg viewBox="0 0 1200 800"><rect fill="${encodeURIComponent(bgColor)}" width="1200" height="800"/><polygon points="0,500 300,300 600,400 900,250 1200,350 1200,800 0,800" fill="${encodeURIComponent(config.surface_color || defaultConfig.surface_color)}" opacity="0.4"/><polygon points="200,600 500,450 800,520 1200,420 1200,800 0,800" fill="${encodeURIComponent(config.primary_color || defaultConfig.primary_color)}" opacity="0.3"/><circle cx="200" cy="150" r="80" fill="%23fff9c4" opacity="0.6"/></svg>') center/cover no-repeat`;
      document.querySelector('.gallery-wrapper').style.backgroundAttachment = 'fixed';
      
      const title = document.getElementById('gallery-title');
      title.textContent = config.gallery_title || defaultConfig.gallery_title;
      title.style.color = config.text_color || defaultConfig.text_color;
      title.style.fontFamily = `${customFont}, ${baseFontStack}`;
      title.style.fontSize = `${baseSize * 3}px`;

      const subtitle = document.getElementById('gallery-subtitle');
      subtitle.textContent = config.gallery_subtitle || defaultConfig.gallery_subtitle;
      subtitle.style.color = config.text_color || defaultConfig.text_color;
      subtitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      subtitle.style.fontSize = `${baseSize * 1.25}px`;

      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.style.background = config.surface_color || defaultConfig.surface_color;
      });

      const cardTitles = document.querySelectorAll('.card-title');
      cardTitles.forEach(title => {
        title.style.color = config.text_color || defaultConfig.text_color;
        title.style.fontFamily = `${customFont}, ${baseFontStack}`;
        title.style.fontSize = `${baseSize * 1.125}px`;
      });

      const cardTexts = document.querySelectorAll('.card-text');
      cardTexts.forEach(text => {
        text.style.color = config.text_color || defaultConfig.text_color;
        text.style.fontFamily = `${customFont}, ${baseFontStack}`;
        text.style.fontSize = `${baseSize * 0.875}px`;
      });

      const closeBtn = document.getElementById('close-button');
      closeBtn.style.borderColor = config.primary_color || defaultConfig.primary_color;
      closeBtn.style.color = config.primary_color || defaultConfig.primary_color;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_color || defaultConfig.primary_color,
              set: (value) => {
                config.primary_color = value;
                window.elementSdk.setConfig({ primary_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ['gallery_title', config.gallery_title || defaultConfig.gallery_title],
          ['gallery_subtitle', config.gallery_subtitle || defaultConfig.gallery_subtitle]
        ])
      });
    }

    // Search functionality
    const searchInput = document.getElementById('search-input');
    const backBtn = document.getElementById('back-btn');

    searchInput.addEventListener('input', (e) => {
      const value = e.target.value;
      renderGallery(value);
      
      // Show/hide back button
      if (value.trim() !== '') {
        backBtn.style.display = 'flex';
        backBtn.style.alignItems = 'center';
        backBtn.style.justifyContent = 'center';
      } else {
        backBtn.style.display = 'none';
      }
    });

    backBtn.addEventListener('click', () => {
      searchInput.value = '';
      backBtn.style.display = 'none';
      renderGallery('');
      searchInput.focus();
    });

    backBtn.addEventListener('mouseenter', () => {
      backBtn.style.background = 'rgba(76, 175, 80, 0.5)';
      backBtn.style.boxShadow = '0 0 20px rgba(76, 175, 80, 0.6)';
    });

    backBtn.addEventListener('mouseleave', () => {
      backBtn.style.background = 'rgba(76, 175, 80, 0.3)';
      backBtn.style.boxShadow = 'none';
    });

    renderGallery();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a47d049b7a60574',t:'MTc2NDE0MzYyMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
